mean(large$sleep_total)
msleep %>%
filter(bodywt>200) %>%
summarize(mean_sleep_lg=mean(sleep_total))
msleep %>%
filter(bodywt<10) %>%
summarize(mean_sleep_sm=mean(sleep_total))
msleep %>%
filter(bodywt>200) %>%
summarize(mean_sleep_lg=mean(sleep_total),
min_sleep_lg=min(sleep_total),
max_sleep_lg=mean(sleep_total),
sd_sleep_lg=sd(sleep_total),
total=n())
msleep %>%
filter(order=="Primates") %>%
summarize(mean_bw=mean(bodywt),
min_bw=min(bodywt),
max_bw=mean(bodywt),
sd_bw=sd(bodywt),
total=n())
msleep %>%
filter(bodywt > 100)
msleep %>%
summarize(n_genera=n_distinct(genus)) #this is going to count the number of genera in msleep
msleep %>%
tabyl(genus)
msleep %>%
summarize(n_genera=n_distinct(msleep)) #this is going to count the number of genera in msleep
msleep %>%
summarize(mean_sleep_total=mean(sleep_total),
min_sleep_total=min(sleep_total),
max_sleep_total=max(sleep_total),
sd_sleep_lg=sd(sleep_total),
total=n())
msleep %>%
group_by(vore) %>% #we are grouping by feeding ecology, a categorical variable
summarize(min_bodywt = min(bodywt),
max_bodywt = max(bodywt),
mean_bodywt = mean(bodywt),
total=n())
msleep %>%
group_by(order) %>%
summarize(mean_bodywt = mean(brainwt))
msleep %>%
group_by(order) %>%
summarize(mean_bodywt = mean(brainwt, na.rm=T))
msleep %>%
filter(order=="Cetacea") %>%
group_by(order) %>%
select(order, genus, brainwt)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
skim(fisheries)
skim(fisheries)
tabyl(fisheries)
skim(fisheries)
tabyl("fisheries")
skim(fisheries)
tabyl("fisheries")
glimpse(fisheries)
summary(fisheries)
colnames(fisheries)
View(fisheries)
fishy <- clean_names(fisheries)
View(fishy)
data_class_factor <- clean_names(fisheries)
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
skim(fisheries)
colnames(fisheries)
data_class_factor <- clean_names(fisheries)
View(data_class_factor)
View(fisheries)
colnames(data_class_factor)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfi#s_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
View(fisheries)
View(data_class_factor)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
data_class_factor <- clean_names(fisheries)
colnames(data_class_factor)
#fisheries_tidy <- fisheries %>%
#  pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfi#s_species_number,asfis_species_name,fao_major_fishing_area,measure),
#               names_to = "year",
#               values_to = "catch",
#               values_drop_na = TRUE) %>%
#  mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
#  mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
#  mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
#fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy <- data_class_factor %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
View(data_class_factor)
fisheries_tidy %>%
tabyl(country)
fisheries_tidy %>%
summarize(n_country=n_distinct(country))
data_class_factor %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarize(n_asfisnumber=n_distinct(asfis_species_number))
View(fisheries_tidy)
fisheries_tidy %>%
summarize(max_sleep_total=max(catch)
fisheries_tidy %>%
select(year=2000)
fisheries_tidy %>%
filter(year=2000)
fisheries_tidy %>%
filter(year==2000)
summarize(largest catch=max(catch)
fisheries_tidy %>%
filter(year=="2000")
summarize(largest catch=max(catch)
fisheries_tidy %>%
filter(year=="2000")
summarize(largest_catch=max(catch)
fisheries_tidy %>%
filter(year==2000)
summarize(largest_catch=max(catch)
fisheries_tidy %>%
filter(year==2000) %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
select(common_name, catch) %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
select(common_name, catch) %>%
filter(year==2000) %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
select(common_name, catch) %>%
filter(year=2000) %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
group_by(common_name, catch) %>%
select(year=2000) %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
group_by(common_name, catch) %>%
select(year=2000) %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
group_by(common_name, catch) %>%
filter(year=2000) %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
select(common_name, catch) %>%
filter(year="2000") %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
select(common_name, catch) %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
filter(year=="2000") %>%
select(common_name, catch) %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
filter(year=="2000") %>%
select(common_name, catch) %>%
summarize(largest_catch=max(catch), na.rm=T)
fisheries_tidy %>%
filter(year=="2000") %>%
select(common_name, catch) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
select(common_name, catch) %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
select(common_name, catch) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(common_name, largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T), total=n())
fisheries_tidy %>%
filter(name, year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T), )
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T), )
fisheries_tidy %>%
filter(year=="2000")
fisheries_tidy %>%
filter(summarize(largest_catch=max(catch, na.rm=T), year=="2000")
fisheries_tidy %>%
filter(max(catch), year=="2000")
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T), )
fisheries_tidy %>%
group_by(common_name) %>%
filter(year=="2000") %>%
summarize(largest_catch=max(catch, na.rm=T), )
fisheries_tidy %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch, na.rm=T), )
fisheries_tidy %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch)
fisheries_tidy %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch))
fisheries_tidy %>%
group_by(common_name) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
group_by(common_name, catch) %>%
summarize(largest_catch=max(catch, na.rm=T))
fisheries_tidy %>%
summarise(across(!c(common_name, catch),
max, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarise(across(!c(common_name, catch),
max, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarise(across(!c(all), max, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarise(across(c(common_name, catch), max, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarise(across(c(country, common_name, catch), max, na.rm=T))
fisheries_tidy %>%
summary(fisheries_tidy)
fisheries_tidy %>%
filter(catch=="77000")
View(fisheries_tidy)
fisheries_tidy %>%
filter(year=="2000")
summary(fisheries_tidy)
fisheries_tidy %>%
filter(year=="2000")
summary(fisheries_tidy)
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000")
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
filter(catch=="9068")
View(fisheries_tidy)
fisheries_tidy %>%
select(country)
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
group_by(country, common_name)
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
group_by(country, common_name) %>%
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
group_by(country, common_name, catch) %>%
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
select(country) %>%
filter(between(year, 1990, 2000), asif_species_name== "Sardina pilchardus")
fisheries_tidy %>%
select(country) %>%
filter(between(year, 1990, 2000))
fisheries_tidy %>%
select(country) %>%
filter(year, 1990, 2000))
fisheries_tidy %>%
select(country) %>%
filter(year, 1990, 2000)
fisheries_tidy %>%
select(country, asif_species_name) %>%
fisheries_tidy %>%
select(country, asif_species_name)
fisheries_tidy %>%
select(country, asif_species_name)
fisheries_tidy %>%
select(country)
fisheries_tidy %>%
select(country, asfis_species_name)
fisheries_tidy %>%
select(country, asfis_species_name=Sardina pilchardus)
fisheries_tidy %>%
select(country, asfis_species_name="Sardina pilchardus")
fisheries_tidy %>%
select(fisheries_tidy$asfis_species_name, contains("pilchardus"))
fisheries_tidy %>%
select(contains("pilchardus"))
fisheries_tidy %>%
filter(asif_species_name== "Sardina pilchardus")
fisheries_tidy %>%
filter(asif_species_name== "Sardina pilchardus") %>%
summarize(most_s=max(catch))
fisheries_tidy %>%
summarize(most_s=max(catch))
fisheries_tidy %>%
summarize(most_s=max(catch, na.rm=T))
fisheries_tidy %>%
filter(year, 1990, 2000)
fisheries_tidy %>%
filter(between(year, 1990, 2000))%>%
summarize(most_s=max(catch, na.rm=T))
fisheries_tidy %>%
filter(between(year, 1990, 2000))%>%
summarize(most_s=max(catch, na.rm=T)) %>%
select(asfis_species_name)
fisheries_tidy %>%
select(asfis_species_name) %>%
filter(between(year, 1990, 2000))%>%
summarize(most_s=max(catch, na.rm=T))
fisheries_tidy %>%
select(asfis_species_name) %>%
filter(year %in% c(1990, 2000)
summarize(most_s=max(catch, na.rm=T))
fisheries_tidy %>%
select(asfis_species_name) %>%
filter(fisheries_tidy$year %in% c(1990, 2000) %>%
summarize(most_s=max(catch, na.rm=T))
fisheries_tidy %>%
select(asfis_species_name) %>%
filter(year %in% c(1990, 2000) %>%
summarize(most_s=max(catch, na.rm=T))
summarize(across(contains("pilchardus"), mean, na.rm=T))
fisheries_tidy
summarize(across(contains("pilchardus"), mean, na.rm=T))
fisheries_tidy
summarize(across(contains("pilchardus"), max, na.rm=T))
fisheries_tidy %>%
select(asfis_species_name) %>%
filter(year %in% c(1990, 2000)
fisheries_tidy %>%
filter(year %in% c(1990, 2000)
fisheries_tidy %>%
filter(year %in% c(1990, 2000)
filter(fisheries_tidy$year %in% c(1990, 2000)
getwd()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
getwd()
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
skim(fisheries)
colnames(fisheries)
data_class_factor <- clean_names(fisheries)
colnames(data_class_factor)
fisheries_tidy <- data_class_factor %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
fisheries_tidy %>%
tabyl(country)
fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
fisheries_tidy %>%
summarize(n_asfisnumber=n_distinct(asfis_species_number))
fisheries_tidy %>%
filter(year=="2000") %>%
summarise(across(c(country, common_name, catch), max, na.rm=T))
fisheries_tidy %>%
filter(year=="2000") %>%
summarize(max(catch, na.rm=T))
fisheries_tidy %>%
filter(catch=="9068")
View(fisheries_tidy)
fisheries %>%
filter(between(year, 1990, 2000) & asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(sardines_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(sardines_caught))
fisheries_tidy %>%
filter(between(year, 1990, 2000) & asfis_species_name == "Sardina pilchardus") %>%
group_by(country) %>%
summarize(sardines_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(sardines_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012) & common_name == "cephalopods nei") %>%
group_by(country) %>%
summarize(cephalopods_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(cephalopods_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012) & asfis_species_name == "cephalopoda") %>%
group_by(country) %>%
summarize(cephalopods_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(cephalopods_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012) & asfis_species_name == "cephalopoda") %>%
group_by(country) %>%
summarize(cephalopods_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(cephalopods_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012) & asfis_species_name == "cephalopoda") %>%
group_by(country) %>%
summarize(cephalopods_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(cephalopods_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012) & asfis_species_name == "Cephalopoda") %>%
group_by(country) %>%
summarize(cephalopods_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(cephalopods_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012)) %>%
group_by(species) %>%
summarize(specie_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(species_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012)) %>%
group_by(species) %>%
summarize(species_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(species_caught))
fisheries_tidy %>%
filter(between(year, 2008, 2012)) %>%
group_by(asfis_species_name) %>%
summarize(species_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(species_caught))
View(fisheries_tidy)
fisheries_tidy %>%
filter(between(year, 2008, 2012)) %>%
group_by(asfis_species_name, isscaap_taxonomic_group, common_name) %>%
summarize(species_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(desc(species_caught))
fisheries_tidy %>%
filter(between(year, 2000, 2012)) %>%
group_by(country, isscaap_taxonomic_group, common_name) %>%
summarize(species_caught=sum(catch, na.rm=T), n=n()) %>%
arrange(species_caught)
